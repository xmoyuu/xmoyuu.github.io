<head>
    <script>
        audioContext = new window.AudioContext()

        request = new XMLHttpRequest()
        request.open('GET', './Hanser.mp3', true)
        request.responseType = 'arraybuffer'
        request.onload = function () {
            audioContext.decodeAudioData(request.response, function (buffer) {
                playBuffer(buffer, 0.1)
            }, function () {
                // error handle
                // 例如文件损坏、格式不对
            })
        }
        request.send()

        function playBuffer(buffer, volume) {
            sourceNode = audioContext.createBufferSource()
            sourceNode.buffer = buffer
            gainNode = audioContext.createGain()
            gainNode.gain.value = volume
            //gainNode.gain.setValueAtTime(0.5, audioContext.currentTime + 0)
            //gainNode.gain.linearRampToValueAtTime(1.0, audioContext.currentTime + 1)
            gainNode.gain.exponentialRampToValueAtTime(1.0, audioContext.currentTime + 1)
            //gainNode.gain.setValueCurveAtTime([0.0, 0.2, 0.5, 1], audioContext.currentTime + 0, 10)
            sourceNode.connect(gainNode)
            gainNode.connect(audioContext.destination)
            sourceNode.start(0)
        }
    </script>
</head>