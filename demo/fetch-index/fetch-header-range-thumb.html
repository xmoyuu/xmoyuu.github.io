<body>
    <img id="thumb">
</body>

<script>
    log = console.log.bind(console)

    function consoleLogFetchRange(url) {
        fetch(url,
            {
                headers: {
                    range: 'bytes=0-60000'
                },
                responseType: 'arraybuffer'
            }
        )
            .then(response => {
                return response.arrayBuffer()
            })
            .then(arrayBuffer => {
                array = new Uint8Array(arrayBuffer)
                log(array)

                var start, end
                for (i = 2; i < array.length; i++) {
                    if (array[i] === 0xFF) {
                        if (!start) {
                            if (array[i + 1] === 0xD8) {
                                start = i
                            }
                        } else {
                            if (array[i + 1] === 0xD9) {
                                end = i
                                break
                            }
                        }
                    }
                }
                if (start && end) {
                    log(start)
                    log(end)
                    log(array[end + 1])

                    urlCreator = window.URL
                    imageUrl = urlCreator.createObjectURL(
                        new Blob(
                            [array.subarray(start, end + 2)],
                            { type: 'image/jpeg' }
                        )
                    )
                    log(
                        new Blob(
                            [array.subarray(start, end)],
                            { type: 'image/jpeg' }
                        )
                    )
                    thumb.src = imageUrl
                }
            })
    }

    consoleLogFetchRange('http://127.0.0.1:5500/IMG.jpg')
</script>