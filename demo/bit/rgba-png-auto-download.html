<body>
    <canvas id="canvas"></canvas>
</body>

<script id="script">
    canvas.width = 2
    canvas.height = 2

    context = canvas.getContext('2d')

    context.fillStyle = 'rgba(255,0,0,1)'
    context.fillRect(0, 0, 1, 1)

    context.fillStyle = 'rgba(0,255,0,1)'
    context.fillRect(1, 0, 1, 1)

    context.fillStyle = 'rgba(0,0,255,1)'
    context.fillRect(0, 1, 1, 1)

    context.fillStyle = 'rgba(255,255,255,0)'
    context.fillRect(1, 1, 1, 1)

    canvas.toBlob(blob => {
        ObjectURL = URL.createObjectURL(blob)

        a = document.createElement('a')
        a.href = ObjectURL
        a.download = 'rgba.png'

        a.dispatchEvent(new MouseEvent('click'))
        setTimeout(() => {
            URL.revokeObjectURL(ObjectURL)
            if (blob.close) blob.close()
        }, 1e3)
    })
</script>

<pre><code id="showScript"></code></pre>
<script>
    showScript.innerText = `${script.innerText}`
</script>